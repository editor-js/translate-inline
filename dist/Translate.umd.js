(function(){"use strict";try{if(typeof document!="undefined"){var t=document.createElement("style");t.appendChild(document.createTextNode("._rotate-cw_1gwtr_1{animation:_rotate-cw_1gwtr_1 .3s ease-in infinite}._rotate-ccw_1gwtr_5{animation:_rotate-ccw_1gwtr_5 .15s ease-out}@keyframes _rotate-cw_1gwtr_1{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes _rotate-ccw_1gwtr_5{0%{transform:rotate(0)}to{transform:rotate(-360deg)}}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();
(function(n,r){typeof exports=="object"&&typeof module<"u"?module.exports=r():typeof define=="function"&&define.amd?define(r):(n=typeof globalThis<"u"?globalThis:n||self,n.Translate=r())})(this,function(){"use strict";var a=Object.defineProperty;var l=(n,r,s)=>r in n?a(n,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[r]=s;var i=(n,r,s)=>(l(n,typeof r!="symbol"?r+"":r,s),s);const n={"rotate-cw":"_rotate-cw_1gwtr_1","rotate-ccw":"_rotate-ccw_1gwtr_5"},r='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewBox="0 0 24 24"><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M7 17C8 14.5 12 12 13 9"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M8.5 11C8.5 11 10 14 12.5 15"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M6 7.7H16M11 7.7V5.7"/><path stroke="currentColor" stroke-linecap="round" stroke-width="2" d="M14.5 18L15.2143 16M15.2143 16L16.9159 11.2354C16.9663 11.0942 17.1001 11 17.25 11C17.3999 11 17.5337 11.0942 17.5841 11.2354L19.2857 16M15.2143 16H19.2857M20 18L19.2857 16"/></svg>';class s{constructor({config:e,api:t}){i(this,"api");i(this,"config");i(this,"nodes");i(this,"originalText");this.config=e,this.api=t,this.nodes={wrapper:null,buttonTranslate:null},this.originalText=""}static get isInline(){return!0}static get title(){return"Translate"}render(){return this.nodes.wrapper=document.createElement("button"),this.nodes.wrapper.classList.add(this.api.styles.inlineToolButton),this.nodes.wrapper.type="button",this.nodes.wrapper.innerHTML=r,this.nodes.buttonTranslate=this.nodes.wrapper.firstChild,this.nodes.wrapper}async surround(e){if(this.originalText){this.toggleAnimatedButton("ccw"),e.deleteContents(),e.insertNode(document.createTextNode(this.originalText)),setTimeout(()=>{this.toggleAnimatedButton("ccw",!1)},300),this.select(e),this.originalText="";return}const t=e.toString();if(!t)return;this.toggleAnimatedButton("cw");const o=await this.translate(t);this.toggleAnimatedButton("cw",!1),o&&(this.originalText=t,e.deleteContents(),e.insertNode(document.createTextNode(o)),this.select(e))}checkState(){return!1}select(e){const t=window.getSelection();!t||(t.removeAllRanges(),t.addRange(e))}async translate(e){if(!!e)try{if(!this.config.endpoint)throw new Error("Translation endpoint is not specified");let t;try{t=await fetch(`${this.config.endpoint}${e}`)}catch{throw new Error("Translation server is not available")}if(t.status!==200)throw new Error("Bad response from translation server");const o=await t.json();if(o.status=="error")throw new Error(`Server error: ${o.message}`);return o.message}catch(t){this.api.notifier.show({message:t.message,style:"error"})}}toggleAnimatedButton(e,t=!0){!this.nodes.buttonTranslate||this.nodes.buttonTranslate.classList.toggle(n[`rotate-${e}`],t)}}return s});
